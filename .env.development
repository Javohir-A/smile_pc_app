
# .env.development - Development environment
# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
WORKERS_DIR=src/workers
LOG_FILE=src/detections.csv
LOG_LEVEL=DEBUG
DEBUG=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_URL=postgres://udevs_4a17598bc0d14a18869d1b40d22ba7f3_p_postgres_svcs:7FZNexacHb@142.93.164.37:30032/udevs_4a17598bc0d14a18869d1b40d22ba7f3_p_postgres_svcs?sslmode=disable
DB_NAME=udevs_4a17598bc0d14a18869d1b40d22ba7f3_p_postgres_svcs
DB_USER=udevs_4a17598bc0d14a18869d1b40d22ba7f3_p_postgres_svcs
DB_PASSWORD=7FZNexacHb
DB_HOST=142.93.164.37
DB_PORT=30032
DB_SSLMODE=require
DB_CONNECTION_TIMEOUT=30
DB_MAX_CONNECTIONS=20

# =============================================================================
# CAMERA CONFIGURATION
# =============================================================================
# Development - using webcam or test streams
RTSP_URLS=rtsp://admin:admin@192.168.1.100:554/stream
FALLBACK_URL=0  # Use webcam

MAX_RECONNECTS=3
RECONNECT_DELAY=1.0
MAX_ERRORS=5
CAMERA_POLL_INTERVAL=60
STREAM_TIMEOUT=10
BUFFER_SIZE=500000

# =============================================================================
# DETECTION CONFIGURATION
# =============================================================================
MODEL_PROTOTXT=var/model/deploy.prototxt
MODEL_WEIGHTS=var/model/res10_300x300_ssd_iter_140000_fp16.caffemodel

DETECTION_SIZE=320,320
DETECTION_INTERVAL=5
DISTANCE_THRESHOLD=0.5
CONFIDENCE_THRESHOLD=0.3

EMOTION_DETECTION_INTERVAL=1.0
MIN_EMOTION_DURATION=2.0
MAX_FACES_PER_FRAME=5
FACE_RECOGNITION_TIMEOUT=3

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
MILVUS_HOST=159.89.102.218
MILVUS_PORT=19530
MILVUS_ALIAS=development
MILVUS_COLLECTION=face_collection_dev2
MILVUS_TIMEOUT=10
MILVUS_INDEX_NAME=face_embedings
MILVUS_METRIC_TYPE=L2
MILVUS_INDEX_TYPE=IVF_FLAT
MILVUS_PARAMS={"nlist": 128}

EMOTION_SERVICE_URL=http://localhost:8001/api/emotions
EMOTION_SERVICE_TIMEOUT=5
UCODE_ADMIN_URL=http://localhost:8002/api/admin
UCODE_ADMIN_TIMEOUT=5
API_RETRY_ATTEMPTS=2
API_RETRY_DELAY=0.5

# =============================================================================
# DISPLAY CONFIGURATION
# =============================================================================
DISPLAY_WIDTH=1280
DISPLAY_HEIGHT=720
ENABLE_GUI=true
SHOW_FPS=true
SHOW_DETECTION_BOXES=true
SHOW_EMOTION_LABELS=true
FULLSCREEN=false

# =============================================================================
UCODE_APP_ID=P-QlWnuJCdfy32dsQoIjXHQNScO7DR2TdL
# Add these to your .env.development file to configure video recording

# Video Recording Configuration
VIDEO_ENABLED=true
VIDEO_FPS=30
VIDEO_RESOLUTION=640,480
VIDEO_MAX_FILE_SIZE_MB=50
VIDEO_ENCODING_THREADS=2
VIDEO_BUFFER_SECONDS=30

# Trigger emotions for video recording (comma-separated)
VIDEO_TRIGGER_EMOTIONS=upset,smile,normal
VIDEO_RECOGNIZED_ONLY=true

# Upload settings
VIDEO_ASYNC_UPLOAD=true
VIDEO_CLEANUP_AFTER_UPLOAD=true
VIDEO_KEEP_FAILED_UPLOADS=false
VIDEO_MAX_RETRIES=3
VIDEO_RETRY_DELAY=5
VIDEO_UPLOAD_TIMEOUT=60

# Video annotation settings
VIDEO_INCLUDE_ANNOTATIONS=true
VIDEO_INCLUDE_TIMESTAMP=true

API_BASE_URL=https://tabassum.mini-tweet.uz/api/v1
GUI_ENABLED=true

# =============================================================================
# VIDEO RECORDING CONFIGURATION
# =============================================================================

# Enable/disable video recording
ENABLE_RECORDING=true

# Output directory for recorded videos
RECORDING_OUTPUT_DIR=recordings

# Recording settings
RECORDING_FPS=15                    # Frames per second for recording
RECORDING_CODEC=VP80                # WebM codec: VP80 (VP8) or VP90 (VP9)
RECORDING_QUALITY=80                # Quality setting (0-100)

# File management
RECORDING_MAX_DURATION_MIN=60       # Max duration per file in minutes
RECORDING_MAX_FILE_SIZE_MB=500      # Max file size in MB
RECORDING_CLEANUP_HOURS=72          # Auto-cleanup files older than X hours

# Advanced settings
RECORDING_ENABLE_AUDIO=false        # Audio recording (requires additional setup)
RECORDING_FRAME_BUFFER_SIZE=30      # Max frames to buffer in memory

# Recording triggers
RECORDING_AUTO_START=true           # Auto-start recording when stream starts
RECORDING_ON_FACE_DETECTION=false   # Only record when faces are detected
RECORDING_ON_EMOTION_CHANGE=false   # Record when emotions change

# =============================================================================


CAMERA_DISCOVERY_INTERVAL_HOURS=0.05
ENABLE_GUI=true